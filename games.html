<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" type="text/css" href="./css/index.css">
    <link rel="stylesheet" type="text/css" href="./css/games.css">
    <link rel="stylesheet" type="text/css" href="./css/navbar.css">
    <script defer src="../js/tabcloak.js"></script>
</head>
<body>
    <div>
            <div class="icons">
            <ion-icon name="home-outline" onclick="window.location.href='../index.html'"></ion-icon>
            <ion-icon name="settings-outline" onclick="window.location.href='../settings.html';"></ion-icon>
            <ion-icon name="game-controller-outline" onclick="window.location.href='../games.html';"></ion-icon>
            <ion-icon name="chatbox-ellipses-outline" onclick="window.location.href='../widgetbot.html';"></ion-icon>
            <ion-icon name="mail-outline" onclick="window.location.href='../about.html';"></ion-icon>
        </div>
    
        <script src="/uv/uv.bundle.js"></script>
        <script src="/uv/uv.config.js"></script>
        <script src="/sw.js"></script>
    
        <div class="games">
            <div title="Geometry Dash" onclick="window.location.href='./g/basketrandom/index.html';">
                <img src="https://basketrandomonline.github.io/img/basket-random.png" width="100px" height="100px" >
            </div>
            
            <div title="Suggest a game!" onclick="window.location.href='mailto:icebergproxy@usa.com';">
                <ion-icon name="add-circle-outline"></ion-icon>
            </div>
               <script>
    window.addEventListener('DOMContentLoaded', () => {
        const savedGames = JSON.parse(localStorage.getItem('savedGames')) || [];

        function addGame(url, name) {
            const game = {
                url,
                name
            };
            savedGames.push(game);
            localStorage.setItem('savedGames', JSON.stringify(savedGames));
        }

        function loadSavedGames() {
            savedGames.forEach(game => {
                const div = document.createElement('div');
                div.title = game.name;
                const img = document.createElement('img');
                img.src = game.url;
                img.width = 100;
                img.height = 100;
                div.appendChild(img);
                div.addEventListener('click', () => {
                    document.getElementById('game-frame').src = game.url;
                    document.getElementById('game-frame').style.display = 'inline';
                    document.querySelector('.games').style.display = 'none';
                    document.querySelector('.header').style.display = 'none';
                });
                document.querySelector('.games').insertBefore(div, document.getElementById('add-game'));
            });
        }
        loadSavedGames();

        document.querySelector('div[title="Add Your Own!"]').addEventListener('click', () => {
            const url = prompt('URL: ');
            if (url !== null && url !== '') {
                const name = prompt('Name: ');
                if (name !== null && name !== '') {
                    addGame(url, name);
                    const div = document.createElement('div');
                    div.title = name;
                    const img = document.createElement('img');
                    img.src = url;
                    img.width = 100;
                    img.height = 100;
                    div.appendChild(img);
                    div.addEventListener('click', () => {
                        document.getElementById('game-frame').src = url;
                        document.getElementById('game-frame').style.display = 'inline';
                        document.querySelector('.games').style.display = 'none';
                        document.querySelector('.header').style.display = 'none';
                    });
                    document.querySelector('.games').insertBefore(div, document.getElementById('add-game'));
                } else {
                    alert('Please provide a valid name');
                }
            } else {
                alert('Please provide a valid URL');
            }
        });
    });
</script>
        </div>

        <iframe src="" style="position:absolute;display:none;border:none;outline:none;width:100%;height:100%;"></iframe>
    </body>
</html>
    
</body>
</html>
